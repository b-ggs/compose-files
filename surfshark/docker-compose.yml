version: "3.8"
services:
  surfshark:
    image: bxggs/surfshark
    container_name: surfshark
    env_file: .env
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun
    restart: unless-stopped
    dns:
      - 1.1.1.1
  surfshark-ip-printer:
    image: curlimages/curl
    container_name: surfshark-ip-printer
    command: ash -c 'while true; do echo "$$(date) --- $$(curl -s https://api.ipify.org)"; sleep 1800; done'
    restart: unless-stopped
    network_mode: service:surfshark
